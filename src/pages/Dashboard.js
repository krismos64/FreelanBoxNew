"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Dashboard = void 0;
const jsx_runtime_1 = require("react/jsx-runtime");
const companyStore_1 = require("@/store/companyStore");
const calendarStore_1 = require("@/store/calendarStore");
const statisticsStore_1 = require("@/store/statisticsStore");
const date_utils_1 = require("@/utils/date-utils");
const RevenueChart_1 = require("@/components/charts/RevenueChart");
const format_1 = require("@/utils/format");
const date_fns_1 = require("date-fns");
const Dashboard = () => {
    const { company } = (0, companyStore_1.useCompanyStore)();
    const { events } = (0, calendarStore_1.useCalendarStore)();
    const { monthlyRevenue, yearlyRevenue, totalRevenue, revenueHistory } = (0, statisticsStore_1.useStatisticsStore)();
    const todayDate = (0, date_utils_1.getFormattedDate)();
    // Filter today's events
    const todayEvents = events.filter(event => (0, date_fns_1.isToday)(event.start));
    return ((0, jsx_runtime_1.jsx)("div", { className: "p-6", children: (0, jsx_runtime_1.jsxs)("div", { className: "max-w-7xl mx-auto space-y-6", children: [(0, jsx_runtime_1.jsxs)("div", { className: "bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 flex items-center space-x-6", children: [company.logo && ((0, jsx_runtime_1.jsx)("img", { src: company.logo, alt: "Logo de l'entreprise", className: "w-16 h-16 object-contain" })), (0, jsx_runtime_1.jsx)("div", { children: (0, jsx_runtime_1.jsx)("h1", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: company.name || 'Votre Entreprise' }) })] }), (0, jsx_runtime_1.jsx)("div", { className: "bg-gradient-to-r from-primary-500 to-secondary-500 rounded-xl shadow-lg p-8 text-white", children: (0, jsx_runtime_1.jsxs)("div", { className: "space-y-4", children: [(0, jsx_runtime_1.jsxs)("p", { className: "text-xl font-medium", children: ["Bonjour, nous sommes le ", todayDate, "."] }), (0, jsx_runtime_1.jsx)("p", { className: "text-lg opacity-90", children: "Une bonne organisation de votre entreprise sera la cl\u00E9 de votre succ\u00E8s !" })] }) }), (0, jsx_runtime_1.jsxs)("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-6", children: [(0, jsx_runtime_1.jsxs)("div", { className: "bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6", children: [(0, jsx_runtime_1.jsx)("h2", { className: "text-lg font-semibold text-gray-900 dark:text-white mb-4", children: "Chiffre d'affaires mensuel" }), (0, jsx_runtime_1.jsx)("p", { className: "text-3xl font-bold text-primary-600 dark:text-primary-400", children: (0, format_1.formatCurrency)(monthlyRevenue) })] }), (0, jsx_runtime_1.jsxs)("div", { className: "bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6", children: [(0, jsx_runtime_1.jsx)("h2", { className: "text-lg font-semibold text-gray-900 dark:text-white mb-4", children: "Chiffre d'affaires annuel" }), (0, jsx_runtime_1.jsx)("p", { className: "text-3xl font-bold text-secondary-600 dark:text-secondary-400", children: (0, format_1.formatCurrency)(yearlyRevenue) })] }), (0, jsx_runtime_1.jsxs)("div", { className: "bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6", children: [(0, jsx_runtime_1.jsx)("h2", { className: "text-lg font-semibold text-gray-900 dark:text-white mb-4", children: "Chiffre d'affaires total" }), (0, jsx_runtime_1.jsx)("p", { className: "text-3xl font-bold text-indigo-600 dark:text-indigo-400", children: (0, format_1.formatCurrency)(totalRevenue) })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6", children: [(0, jsx_runtime_1.jsx)("h2", { className: "text-lg font-semibold text-gray-900 dark:text-white mb-4", children: "\u00C9v\u00E9nements du jour" }), (0, jsx_runtime_1.jsx)("div", { className: "space-y-3", children: todayEvents.length > 0 ? (todayEvents.map(event => ((0, jsx_runtime_1.jsx)("div", { className: "flex items-center space-x-3 p-3 rounded-lg bg-gray-50 dark:bg-gray-700", children: (0, jsx_runtime_1.jsxs)("div", { className: "flex-1", children: [(0, jsx_runtime_1.jsx)("p", { className: "font-medium text-gray-900 dark:text-white", children: event.title }), (0, jsx_runtime_1.jsx)("p", { className: "text-sm text-gray-500 dark:text-gray-400", children: new Date(event.start).toLocaleTimeString('fr-FR', {
                                                hour: '2-digit',
                                                minute: '2-digit',
                                            }) })] }) }, event.id)))) : ((0, jsx_runtime_1.jsx)("p", { className: "text-gray-500 dark:text-gray-400", children: "Aucun \u00E9v\u00E9nement aujourd'hui" })) })] }), (0, jsx_runtime_1.jsxs)("div", { className: "bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6", children: [(0, jsx_runtime_1.jsx)("h2", { className: "text-lg font-semibold text-gray-900 dark:text-white mb-4", children: "\u00C9volution du chiffre d'affaires" }), (0, jsx_runtime_1.jsx)("div", { className: "h-[400px]", children: (0, jsx_runtime_1.jsx)(RevenueChart_1.RevenueChart, { data: revenueHistory, className: "w-full h-full" }) })] })] }) }));
};
exports.Dashboard = Dashboard;
